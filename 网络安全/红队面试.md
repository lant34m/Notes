**记一次红队实习失败的面试经历**

  事情的起因是前天渗透没啥思路，我打开某招聘APP随便看了看，发现竟然有HR找我，问我想不想换工作，我本不打算理会，毕竟我现在的工作，钱多（笑）事少有空学习，换什么大保健（划掉）。可对方说是招红队实习生我也就开始聊了起来。

![Screenshot_2020-01-16-20-14-20-929_com.hpbr.bossz](file:///C:/Users/LanT34m/AppData/Local/Packages/oice_16_974fa576_32c1d314_16bf/AC/Temp/msohtmlclip1/01/clip_image002.jpg)![Screenshot_2020-01-16-20-14-40-395_com.hpbr.bossz](file:///C:/Users/LanT34m/AppData/Local/Packages/oice_16_974fa576_32c1d314_16bf/AC/Temp/msohtmlclip1/01/clip_image004.jpg)

 

 

 

闲聊过程我就不说了，我也知道自己什么水平所以这次是抱着试水心态面试的。

 

面试大佬如约打来电话

 

大佬：你好！我是某某公司的，我看了你简历上写着你做过APT项目，还使用cobaltstrike 做过免杀，能和我聊聊这个？

 

菜鸡：APT项目是我们这边一个季度项目，我主要是负责钓鱼攻击，我制作了一个企信登录界面，通过打开这个网站，网站就会弹框提示“当前flash版本过低，无法加载一些应用，请升级”，只要用户点击确定，浏览器就会打开我另外搭建的flash伪造界面，但里面的下载链接已经被我替换成了CS后门，CS后门主要是通过CS只带的python shellcode进行免杀的。

（下面是我的学习资料，HACK公众号那篇免杀文章就是在我们做这个之后不久发的，当时自己也想写来着，错过了300块）

·https://www.baikesec.com/html/webstudy/penetration/22.html/penetration/22.html

·https://www.baikesec.com/html/webstudy/still/77.html/still/77.html

大佬：那你了解具体的免杀原理吗？

菜鸡：（犹豫了一阵子）杀毒软件应该是通过特征码识别进行查杀，我们可以对代码进行一些编码加密和加壳进行免杀吧

 

 大佬心里有数了，没有在问免杀了。

 

 大佬：那你能给我说说对一个高安全强度下的网站如何进行渗透吗？你能说说全部流程？

 

菜鸡：我目前的工作就是对高安全的网站进行渗透测试。我拿到网站我会查看一下DNS解析，看下网站真实IP；得到IP后我会先使用masscan和tcp全端口扫描器进行端口扫描，然后再通过nmap对这些端口进行指纹识别，之后会看看网站使用了什么中间件，中间件的版本信息是什么，看看能不能找到网站后台地址（一般来说很难）把这些收集到的信息写入EXCL表格。然后通过收集到的端口和中间件信息去找exploit-db.com和一些网站找找历史漏洞，比如我在一次渗透中发现有一个网站他开启了5555端口是一个freeXXX服务，我通过查找资料了解这是一个adb服务，之前有打过靶机了解msf5上是有一个exp可以利用，于是我使用msf去打这个漏洞，但是我发现没有回显，我询问我的同事说你可以使用正向连接试试，（这是内网的站，但当时大佬问我说成了外网），但还是没有回显，猜测可能是被拦截了。

 

大佬：那你中间件是怎么利用的？（原话忘记了）

 

菜鸡：我通过查阅资料发现这个版本的weblogic存在反序列化漏洞，我访问了漏洞几个接口地址发现都是能打开的，使用poc验证下确定存在该漏洞。然后我使用msf想让目标反弹shell，没有成功，我们分析是有流量出去但没有流量回去，认为这个是被拦截了。

 

大佬：我看你简历挖的逻辑漏洞比较多，你对其他web漏洞了解吗，比如文件上传如何绕过。

 

菜鸡：现在网站一般都是用白名单吧，黑名单用的比较少，如果是黑名单就很好绕过，比如如果是php，我们就能把后缀名改成php3,php5之类的；白名单之前可以使用%00进行截断，然后配合一些解析漏洞进行绕过吧。

 

大佬：那你了解过数据库？比如MySql ROOT权限下如何进行利用

 

菜鸡：是提权到服务器？（大佬说是），如果有ROOT权限我们能进行写文件，然后直接用菜刀或蚁剑连接即可。

 

大佬：那你了解其他一些数据库提权吗比如说sqlserver sa权限如何利用，实战过吗？

 

菜鸡：（拿着手机傻了，老老实实说没太了解，此时心里有点慌了）

 

大佬：嗯，那我们聊聊内网吧，内网你是如何渗透的，如何进行横向。有实战过吗？

 

菜鸡：内网我会先对C段进行扫描，然后批量识别ip开放的端口，然后在进行利用，一般内网弱口令居多，我在学校渗透过摄像头就是通过厂家默认密码拿下的。横向没了解过。

大佬：那你还有什么擅长的？

 

菜鸡：我最近在看一本书讲的是近源渗透。

 

大佬：（有些惊讶）那你能说说如何对一家企业进行物理入侵？

 

菜鸡：先进行踩点，伪造员工牌子骗过保安，然后寻找网线接口(外包公司办公间）插网线。

 

技术方面就问了这么多吧，之后大佬和我聊了会如何进行内网渗透和ATT&CK的知识，我就知道答得不行，这次也基本凉掉了。

 

虽然这次面试没有通过，但还是学习到了很多，知道自己需要加强哪方面的学习，也算是失败中的成功吧。

 

 

另附上一些的学习资料供大家参考：

 

DNS查询：https://securitytrails.com/

Weblogic漏洞扫描：https://github.com/rabbitmask/WeblogicScan

Fuzz信息收集：https://www.anquanke.com/post/id/196599

https://www.anquanke.com/post/id/196599

提权：《网络攻防实战研究-漏洞利用与提权》

ATT&CK学习：https://attack.mitre.org/

 

 

 